<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet">

    <!-- <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Kalam&display=swap" rel="stylesheet"> -->

    <title>Back to 90's</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="blueprint">
    <main>
        <header>
            <!-- <h1>Back to the 90's ...</h1> -->
            <img src="images/title.svg" alt="title" style="filter: grayscale(100%)">
            
            <p>A long time ago I developed interfaces for a company that no longer exists, but the memories remain.</p>
            <p>It was the dark age of square windows in Windows 95. Everything about the user interface was flat, square, and boring. I was lucky enough to convince the management to add a little fun, and it was the right decision at the time. I still love this design.</p>

            <div class="countdown-wrap">
                <p id="countdown">:</p>
            </div>
        </header>

        <section class="container">
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image006.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image002.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image001.png" alt="UI picture"> </div></div>

            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image003.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image005.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image004.png" alt="UI picture"> </div></div>

            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image014.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image008.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image011.png" alt="UI picture"> </div></div>

            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image009.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image010.png" alt="UI picture"> </div></div>
            <div class="grid-item"><div class="grid-item-body"> <img src="images/app/image012.png" alt="UI picture"> </div></div>
        </section>
    </main>

    <script>
        let images = [...document.querySelectorAll('.grid-item-body > img')];
        let prev = 1;

        function random() {
            return Math.floor(Math.random() * images.length); // [0..lenght|
        }

        function delay(ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
        }

        function popup(image, on) {
            const c = image.classList;
            c[on ? 'add' : 'remove']('popup');
            c[on ? 'remove' : 'add']('normal');
            image.style.opacity = on ? '1' : '.2';
        }

        async function* timeline(num) {
            let i = 0;
            while (i < num) {
                yield i++;
            }
        }

        function showCounter(num) {
            countdown.innerText = `${num}`;
        }

        async function run() {
            let counter = 1;

            // hide all
            // for await (let img of images) {
            //     await delay(400);
            //     showCounter(counter++);
            //     popup(img, false);
            // }

            // random popup
            let cycles = 3; //images.length
            for await (let cycle of timeline(cycles)) {
                showCounter(cycles - cycle);
                await delay(1000);

                popup(images[prev], false);
                let i = random();
                while (i === prev) {
                    i = random();
                }
                prev = i;
                popup(images[prev], true);
            }

            // show all
            countdown.innerText = `That's all Folks`;
            countdown.style.fontSize = '3em';
            images.forEach(image => (popup(image, false), image.style.filter = 'none', image.style.opacity = '1'));
        }
        run();
    </script>

</body>
</html>